<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
	<title>HTML 所見即所得編輯器</title>
</head>
<body>
	<h1>HTML 所見即所得編輯器</h1>
	<div>
		<button onclick="openFile()">開啟檔案</button> <button onclick="saveFile()">另存新檔</button>
	</div>
	<textarea id="editor" oninput="updatePreview()" style="width:100%;height:300px;font-size:20px;"></textarea> <button onclick="insertTab()">Tab</button> <button onclick="insertTag('p')">段落</button> <button onclick="insertTag('h1')">一級標題</button> <button onclick="insertTag('h2')">二級標題</button> <button onclick="insertTag('h3')">三級標題</button> <button onclick="insertTag('ul')">項目清單</button> <button onclick="insertTag('ol')">編號清單</button> <button onclick="insertTag('li')">清單項目</button> <button onclick="insertTag('table')">表格</button> <button onclick="insertTag('tbody')">表格內容</button> <button onclick="insertTag('tr')">列</button> <button onclick="insertTag('td')">欄</button>
	<h1>預覽區</h1>
	<div id="preview"></div>
	<script>
	     function openFile() {
	       var input = document.createElement('input');
	       input.type = 'file';
	       input.accept = '.html';

	       input.onchange = function() {
	         var file = input.files[0];
	         var reader = new FileReader();

	         reader.onload = function() {
	           var editor = document.getElementById('editor');
	           editor.value = reader.result;
	           updatePreview();
	         };

	         reader.readAsText(file);
	       };

	       input.click();
	     }

	     function saveFile() {
	       var editor = document.getElementById('editor').value;
	       var blob = new Blob([editor], {type: "text/html"});
	       var url = URL.createObjectURL(blob);

	       var a = document.createElement('a');
	       a.download = 'newfile.html';
	       a.href = url;
	       a.style.display = 'none';

	       document.body.appendChild(a);
	       a.click();
	       document.body.removeChild(a);
	     }

	function insertTag(tagName) {
	 var editor = document.getElementById("editor");
	 var startPos = editor.selectionStart;
	 var endPos = editor.selectionEnd;
	 var selectedText = editor.value.substring(startPos, endPos);

	 editor.value = editor.value.slice(0, startPos) + '<' + tagName + '>' + selectedText + '</' + tagName + '>' + editor.value.slice(endPos);
	 var cursorPos = startPos + 2 + tagName.length;

	 editor.setSelectionRange(cursorPos, cursorPos + selectedText.length);
	 editor.focus();
	 updatePreview();
	}

	       function insertTab() {
	           var editor = document.getElementById("editor");
	           var startPos = editor.selectionStart;
	           var endPos = editor.selectionEnd;
	           var selectedText = editor.value.substring(startPos, endPos);

	           editor.value = editor.value.slice(0, startPos) + '\t' + selectedText + editor.value.slice(endPos);
	           var cursorPos = startPos + 1;

	           editor.setSelectionRange(cursorPos, cursorPos + selectedText.length);
	           editor.focus();
	           updatePreview();
	       }

	     function updatePreview() {
	       var editor = document.getElementById("editor");
	       var preview = document.getElementById("preview");
	       preview.innerHTML = editor.value;
	     }
	</script>
</body>
</html>