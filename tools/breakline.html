<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>斷行工具</title>
  </head>
  <body>
    <style type="text/css">
    textarea {
    	           width: 100%;
    	           height: 300px;
    	           padding: 10px;
    	           box-sizing: border-box;
    	       }</style>
    <script>
    	function processText() {
    	 var textarea = document.getElementById("myTextarea");
    	 var text = textarea.value;
    	 var index = 65; // ASCII碼中65表示字母"A"
    	 text = text.replace(/（/g, "(");
    	 text = text.replace(/）/g, ")");
    	 text = text.replace(/Ａ/g, "A");
    	 text = text.replace(/Ｂ/g, "B");
    	 text = text.replace(/Ｃ/g, "C");
    	 text = text.replace(/Ｄ/g, "D");
    	 text = text.replace(/\s*\([A-D]\)\s*/g, function(match) {
    	   return "\n" + match;
    	 });
    	 text = text.replace(/　/g, " ");
    	 text = text.replace(/	/g, " ");
    	 text = text.replace(/ {2}/g, " ");
    
    	 // Add an extra newline after each line containing "(D)"
    	 text = text.replace(/\(D\).*/g, function(match) {
    	   return match + "\n";
    	 });
    	 textarea.value = text;
    	}
    
    	       function punctuationA() {
    	           var textarea = document.getElementById("myTextarea");
    	           var text = textarea.value;
    	           text = text.replace(/[，；。？！]\s*/g, function(match) {
    	               return match + "\n";
    	           });
    	           text = text.replace(/\n/g, "\n");
    	           textarea.value = text;
    	       }
    
    	       function punctuationB() {
    	           var textarea = document.getElementById("myTextarea");
    	           var text = textarea.value;
    	           text = text.replace(/[，；。？！]\s*/g, function(match) {
    	               return "\n";
    	           });
    	           text = text.replace(/\n/g, "\n");
    	           textarea.value = text;
    	       }
    
    	       function handleFileSelect(event) {
    	           var file = event.target.files[0];
    	           if (!file) {
    	               return;
    	           }
    	           var reader = new FileReader();
    	           reader.onload = function(event) {
    	               var contents = event.target.result;
    	               var textarea = document.getElementById("myTextarea");
    	               textarea.value = contents;
    	           };
    	           reader.readAsText(file);
    	       }
    
    	       function saveFile() {
    	           var textarea = document.getElementById("myTextarea");
    	           var text = textarea.value;
    	           var filename = "processed.txt";
    	           var blob = new Blob([text], {type: "text/plain;charset=utf-8"});
    	           saveAs(blob, filename);
    	       }
    	</script>
    <h1>
    	斷行工具</h1>
    <p>
    	請將試題或文章貼在以下文字框</p>
    <p>
    	<textarea id="myTextarea"></textarea></p>
    <p style="margin-left: 40px;">
    	<button onclick="processText()">選項斷行</button>整理試題適用：讓每個選項獨立一行</p>
    <p style="margin-left: 40px;">
    	<button onclick="punctuationA()">標點斷行</button>語音報讀適用：讓每個句子獨立一行</p>
    <p style="margin-left: 40px;">
    	<button onclick="punctuationB()">標點斷行</button>製作字幕適用：讓每個句子獨立一行，並刪除標點符號</p>
    <p>
    	<button onclick="saveFile()">儲存檔案</button><script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js">
    	</script></p>
  </body>
</html>
